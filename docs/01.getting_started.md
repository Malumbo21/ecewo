# Getting Started

## Table Of Contents

1. [Requirements](#requirements)
2. [Installation](#installation)
3. [Run Server](#run-server)

## Requirements

- A C compiler
- CMake version 3.14 or higher

## Installation

`CMakeLists.txt`:
```cmake
cmake_minimum_required(VERSION 3.14)
project(myproject VERSION 1.0.0 LANGUAGES C)

include(FetchContent)

FetchContent_Declare(
    ecewo
    GIT_REPOSITORY https://github.com/savashn/ecewo.git
    GIT_TAG v2.0.0
)

FetchContent_MakeAvailable(ecewo)

add_executable(${PROJECT_NAME} 
    main.c
)

target_link_libraries(${PROJECT_NAME} PRIVATE ecewo::ecewo)
```

## Run Server

```c
// main.c

#include "ecewo.h"   // Ecewo API
#include <stdio.h>

void hello_world(Req *req, Res *res)
{
    send_text(res, 200, "Hello, World!");
}

int main(void)
{
    if (server_init() != SERVER_OK)
    {
        fprintf(stderr, "Failed to initialize server\n");
        return 1;
    }

    // Register the route
    get("/", hello_world);

    if (server_listen(3000) != SERVER_OK)
    {
        fprintf(stderr, "Failed to start server\n");
        return 1;
    }

    server_run();
    return 0;
}
```

Let's explain this `main.c` file step by step:

- Ecewo provides all its features in `ecewo.h`.

- The `void hello_world()` function is a handler. We pass the `Req *req` parameter to reach the request, and pass the `Res *res` parameter to prepare the response. We send a plain text response using `send_text()`, and it also frees the memory that allocated by the handler automatically. We'll see request handling more detailed in the [Request Handling](docs/request_handling.md) chapter.

- The `int main(void)` function is the entry point of the program. We need to initialize and start the server in that function.

- The server must be initialized first, and should start listening last. In between, we can register routes and initialize other dependencies.

Let's run the following commands in the terminal to build the server:

```shell
mkdir build && cd build && cmake .. && cmake --build .
```

Let's run it:
```shell
// Linux/macOS:
./server

// Windows
./server.exe
```
